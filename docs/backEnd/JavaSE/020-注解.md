# æ³¨è§£

## æ³¨è§£æ¦‚å¿µ

æ³¨è§£ä½œç”¨ï¼šæ³¨è§£ä¸ä¼šç›´æ¥å½±å“ä»£ç é€»è¾‘ï¼Œä½†å¯ä»¥è¢«ç”¨æ¥â€œæ ‡è®°â€æŸäº›ä¿¡æ¯ï¼Œä»è€Œè®©å·¥å…·æˆ–æ¡†æ¶â€œçŸ¥é“â€è¯¥æ€ä¹ˆå¤„ç†è¿™æ®µä»£ç ã€‚æ³¨è§£å°±åƒâ€œæ ‡ç­¾â€ï¼šä½ è´´åœ¨ä»£ç çš„ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ä¸Šï¼Œå‘Šè¯‰ç³»ç»Ÿæˆ–å¼€å‘è€…ï¼Œâ€œè¿™æ®µä»£ç æœ‰ä¸ªç‰¹æ®Šçš„ç”¨é€”â€ã€‚`ä¸åŒçš„æ³¨è§£ï¼Œæœ‰ä¸åŒçš„ä½œç”¨ï¼Œå¯ä»¥æ·»åŠ åœ¨ä¸åŒçš„ä½ç½®ï¼Œæœ‰çš„å¯ä»¥å†™å€¼ï¼Œæœ‰çš„ä¸èƒ½å†™å€¼`ã€‚

JDKæ”¯æŒï¼šæ³¨è§£æ˜¯JDK1.5æ–°åŠ å…¥çš„å†…å®¹ã€‚

æ³¨è§£çš„äº§ç”Ÿï¼š

```java
Java webå¼€å‘å†ç¨‹ï¼šwebé¡¹ç›®ä¸­ä¼šå­˜åœ¨å¤§é‡çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚xml yml propertiesæ–‡ä»¶ç­‰ï¼›
é…ç½®æ–‡ä»¶é˜…è¯»æ€§å·®ï¼Œç¼–å†™é”™è¯¯ä¸èƒ½ç«‹å³æç¤ºï¼›é…ç½®æ–‡ä»¶ä¼šå¢åŠ ä»£ç çš„å¤æ‚ç¨‹åº¦ï¼›
    
JDKå¼€å‘äººå‘˜åœ¨1.5å¼•å…¥äº†æ³¨è§£ï¼Œç”¨äºæ¥æ›¿ä»£é…ç½®æ–‡ä»¶ï¼›
    
æ—©æœŸï¼šJavaä»£ç  + é…ç½®æ–‡ä»¶
ç°åœ¨ï¼šJavaä»£ç  + é…ç½®æ–‡ä»¶ + æ³¨è§£
    
æ³¨è§£çš„ä¼˜ç‚¹ï¼šç®€åŒ–å¼€å‘ æé«˜ä»£ç å¯è¯»æ€§;
æ€æƒ³ï¼šçº¦å®šå¤§äºé…ç½®;
```

## Annotationç±»

Annotationæ˜¯ä¸€ä¸ªæ¥å£ï¼Œæ‰€æœ‰æ³¨é‡Šç±»å‹æ‰©å±•çš„å…¬å…±æ¥å£ã€‚

**æ„é€ æ–¹æ³•**

```java
æ— 
```

**æ–¹æ³•**

annotationType()

```java
ä½œç”¨ï¼šè¿”å›æ­¤æ³¨é‡Šçš„æ³¨é‡Šç±»å‹
    
å‚æ•°ï¼šæ— 
    
è¿”å›å€¼ï¼šç±»<? extends Annotation>
    
ç¤ºä¾‹ï¼š
```



## å¸¸ç”¨æ³¨è§£

@override

è¯¥æ³¨è§£ç”¨äºæ ‡è¯†ä¸€ä¸ªæ–¹æ³•æ˜¯é‡å†™ï¼ˆOverrideï¼‰çˆ¶ç±»æˆ–æ¥å£ä¸­çš„æ–¹æ³•ã€‚å®ƒèƒ½å¸®åŠ©ç¼–è¯‘å™¨æ£€æŸ¥ä½ æ˜¯å¦çœŸæ­£é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé˜²æ­¢æ‹¼å†™é”™è¯¯

```java
class Animal {
    void speak() {
        System.out.println("Animal speaks");
    }
}

class Dog extends Animal {
    @Override
    void speak() {
        System.out.println("Dog barks");
    }
}

```

@FunctionalInterface

ç”¨äºæ ‡æ³¨ä¸€ä¸ªæ¥å£æ˜¯â€œå‡½æ•°å¼æ¥å£â€ï¼ˆåªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼‰ï¼Œå¯ä»¥è¢« Lambda è¡¨è¾¾å¼ä½¿ç”¨ã€‚

```java
@FunctionalInterface
interface MyFunction {
    void execute();  // åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•
}

// ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®ç°è¯¥æ¥å£
public class Main {
    public static void main(String[] args) {
        MyFunction func = () -> System.out.println("Hello from functional interface!");
        func.execute();
    }
}

```

@SuppressWarnings("unused")

è¯¥æ³¨è§£ç”¨äºå‘Šè¯‰ç¼–è¯‘å™¨å¿½ç•¥ç‰¹å®šçš„è­¦å‘Šä¿¡æ¯ã€‚`"unused"` è¡¨ç¤ºå¿½ç•¥â€œæœªä½¿ç”¨çš„å˜é‡â€è­¦å‘Š

```java
public class Demo {
    // æ³¨è§£å¯ä»¥åŠ åœ¨æ–¹æ³•ä¸Šå’Œå˜é‡ä¸Š
    @SuppressWarnings("unused")
    public void doSomething() {
        String unusedVar = "I won't be used";
        System.out.println("Doing something");
    }
}

```

@Deprecated

æ ‡è®°æŸä¸ªç±»ã€æ–¹æ³•ã€å­—æ®µâ€œä¸å»ºè®®ä½¿ç”¨â€ï¼Œä½†ä»ç„¶å¯ä»¥ç”¨ã€‚æç¤ºå¼€å‘è€…ä½¿ç”¨æ–°ç‰ˆæœ¬

```java
@Deprecated
public void oldMethod() {
    System.out.println("This method is deprecated");
}

public void newMethod() {
    System.out.println("Use this method instead");
}

```

@SuppressWarnings

æŠ‘åˆ¶ç¼–è¯‘å™¨çš„è­¦å‘Šä¿¡æ¯ï¼Œæ¯”å¦‚ â€œuncheckedâ€, â€œdeprecationâ€, â€œunusedâ€ ç­‰

```java
@SuppressWarnings("deprecation")
public void callDeprecated() {
    oldMethod(); // ä¸ä¼šæœ‰è­¦å‘Šäº†
}

```

## åº”ç”¨åœºæ™¯

| åœºæ™¯                | ç¤ºä¾‹æ³¨è§£                                      |
| ------------------- | --------------------------------------------- |
| ç¼–è¯‘æ ¡éªŒ            | `@Override`, `@FunctionalInterface`           |
| å¼€å‘å·¥å…·æç¤º        | `@Deprecated`, `@SuppressWarnings`            |
| Java EE/Spring æ¡†æ¶ | `@Component`, `@Autowired`, `@RequestMapping` |
| æµ‹è¯•æ¡†æ¶            | `@Test`, `@Before`, `@After`                  |
| ORM æ˜ å°„            | `@Entity`, `@Table`, `@Column`                |
| è‡ªå®šä¹‰é€»è¾‘ï¼ˆåå°„ï¼‰  | è‡ªå®šä¹‰æ³¨è§£ + `@Retention(RUNTIME)`            |



## å…ƒæ³¨è§£

**å…ƒæ³¨è§£æ˜¯ç”¨äºæ³¨è§£â€œæ³¨è§£â€çš„æ³¨è§£**ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬ç”¨æ¥æè¿°å…¶ä»–æ³¨è§£çš„è¡Œä¸ºå’Œä½œç”¨èŒƒå›´ã€‚

æ¢å¥è¯è¯´ï¼Œå¦‚æœä½ è¦å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„æ³¨è§£ï¼ˆå¦‚ `@MyAnnotation`ï¼‰ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨å…ƒæ³¨è§£æ¥å‘Šè¯‰ç¼–è¯‘å™¨

```java
1ã€è¿™ä¸ªæ³¨è§£åº”è¯¥åº”ç”¨åˆ°å“ªé‡Œï¼Ÿ
2ã€å®ƒåº”è¯¥ä¿ç•™åˆ°ä»€ä¹ˆæ—¶å€™ï¼Ÿ
3ã€å®ƒèƒ½å¦è¢«ç»§æ‰¿ï¼Ÿ
4ã€èƒ½å¦é‡å¤ä½¿ç”¨ï¼Ÿ
```

### å¸¸è§å…ƒæ³¨è§£

| æ³¨è§£å        | ä½œç”¨ç®€è¿°                                                 |
| ------------- | -------------------------------------------------------- |
| `@Target`     | æŒ‡å®šæ³¨è§£å¯ä»¥åº”ç”¨åˆ°å“ªäº›ç¨‹åºå…ƒç´ ä¸Šï¼ˆç±»ã€æ–¹æ³•ã€å­—æ®µç­‰ï¼‰     |
| `@Retention`  | æŒ‡å®šæ³¨è§£åœ¨ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¿ç•™ç­–ç•¥ï¼ˆæºç  / ç±»æ–‡ä»¶ / è¿è¡Œæ—¶ï¼‰ |
| `@Documented` | æŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šåŒ…å«åœ¨ Javadoc ä¸­                          |
| `@Inherited`  | æŒ‡å®šæ³¨è§£æ˜¯å¦ä¼šè¢«å­ç±»ç»§æ‰¿                                 |
| `@Repeatable` | å…è®¸ä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä½ç½®é‡å¤ä½¿ç”¨ï¼ˆJava 8+ï¼‰                |

### å…ƒæ³¨è§£ç¤ºä¾‹

âœ… 1ã€`@Target`

> é™å®šæ³¨è§£èƒ½ç”¨åœ¨ä»€ä¹ˆä½ç½®ä¸Šï¼Œæ¯”å¦‚ç±»ã€æ–¹æ³•ã€å­—æ®µã€å‚æ•°ç­‰ï¼Œé»˜è®¤ä¸å†™ï¼Œä»£è¡¨å¯ä»¥æ·»åŠ åˆ°ä»»ä½•ä½ç½®ã€‚

```java
@Target({ElementType.METHOD, ElementType.TYPE}) // å†™å¤šä¸ªä½ç½®
public @interface MyAnnotation {}
```

ğŸ“ŒElementTypeå¸¸ç”¨å€¼ï¼š

| æšä¸¾å€¼            | è¯´æ˜           |
| ----------------- | -------------- |
| `TYPE`            | ç±»ã€æ¥å£ã€æšä¸¾ |
| `FIELD`           | æˆå‘˜å˜é‡       |
| `METHOD`          | æ–¹æ³•           |
| `PARAMETER`       | å‚æ•°           |
| `CONSTRUCTOR`     | æ„é€ å‡½æ•°       |
| `LOCAL_VARIABLE`  | å±€éƒ¨å˜é‡       |
| `ANNOTATION_TYPE` | æ³¨è§£ç±»å‹       |
| `PACKAGE`         | åŒ…             |

:zap: æ³¨æ„ï¼šå¦‚æœæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå±æ€§å€¼ï¼Œå¹¶ä¸”å±æ€§å€¼ä¸ºvalueï¼Œåˆ™å¯ä»¥ç›´æ¥å†™å€¼ï¼›å…¶ä»–çš„æƒ…å†µéƒ½å¿…é¡»å†™ä¸º `å±æ€§å€¼ = å±æ€§å€¼`å½¢å¼

```java
// @Target Javaæºä»£ç å†…å®¹

@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.ANNOTATION_TYPE)
public @interface Target {
    /**
     * Returns an array of the kinds of elements an annotation type
     * can be applied to.
     * @return an array of the kinds of elements an annotation type
     * can be applied to
     */
    // æ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå±æ€§å€¼ï¼Œå¹¶ä¸”å±æ€§å€¼ä¸ºvalue
    ElementType[] value();
}
```

```java
@Target(ElementType.TYPE) // ç›´æ¥å†™å€¼
public @interface A1 {
	
}
```

âœ… 2ã€`@Retention`

> æŒ‡å®šæ³¨è§£çš„**ä¿ç•™ç­–ç•¥**ï¼Œå³å®ƒåœ¨ä»€ä¹ˆæ—¶å€™å¯¹ç¨‹åºå¯è§ã€‚

```java
@Retention(RetentionPolicy.RUNTIME)
public @interface MyAnnotation {
}
```

ğŸ“ŒRetentionå¸¸ç”¨å€¼ï¼š

| æšä¸¾å€¼          | è¯´æ˜                                               |
| --------------- | -------------------------------------------------- |
| `SOURCE`        | æ³¨è§£åªåœ¨æºç ä¸­å­˜åœ¨ï¼Œç¼–è¯‘åè¢«ä¸¢å¼ƒï¼ˆå¦‚ `@Override`ï¼‰ |
| `CLASS`ï¼ˆé»˜è®¤ï¼‰ | ç¼–è¯‘åˆ° class æ–‡ä»¶ä¸­ï¼Œè¿è¡Œæ—¶ä¸å¯è®¿é—®                |
| `RUNTIME`       | ç¼–è¯‘è¿› classï¼Œè¿è¡Œæ—¶å¯é€šè¿‡åå°„è¯»å–ï¼ˆæ¡†æ¶å¸¸ç”¨ï¼‰     |

âœ… 3. `@Documented`

> æŒ‡å®šæ³¨è§£æ˜¯å¦å‡ºç°åœ¨ Javadoc ä¸­ã€‚

```java
@Documented
public @interface MyAnnotation {
}

```

é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰æ³¨è§£ä¸ä¼šå‡ºç°åœ¨ Javadoc ä¸­ï¼Œé™¤éåŠ äº† `@Documented`ã€‚

:white_check_mark: 4ã€`@Inherited`

> æŒ‡å®šä¸€ä¸ªæ³¨è§£æ˜¯å¦èƒ½è¢«å­ç±»ç»§æ‰¿ï¼ˆä»…å¯¹ç±»æœ‰æ•ˆï¼‰ã€‚

```java
@Inherited
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface Role {
    String value();
}

```

```java
@Role("admin")
class Parent {}

class Child extends Parent {} // Child ä¹Ÿå…·æœ‰ @Role æ³¨è§£

```

 æ³¨æ„ï¼šåªèƒ½**ç”¨äºç±»**ï¼ˆ`ElementType.TYPE`ï¼‰ï¼Œä¸èƒ½ç”¨äºæ–¹æ³•ã€å­—æ®µç­‰ã€‚

âœ… 5 ã€`@Repeatable`ï¼ˆJava 8+ï¼‰

> å…è®¸ä¸€ä¸ªæ³¨è§£åœ¨åŒä¸€ä¸ªä½ç½®**é‡å¤ä½¿ç”¨**ã€‚

```java
@Repeatable(Hints.class)
@interface Hint {
    String value();
}

@interface Hints {
    Hint[] value();
}
```

```java
@Hint("hint1")
@Hint("hint2")
public class Person {
}
```

âœ… ç¤ºä¾‹ï¼šè‡ªå®šä¹‰æ³¨è§£ç»“åˆå…ƒæ³¨è§£ä½¿ç”¨

æ–°å»ºæ³¨è§£æ­¥éª¤ï¼šé¼ æ ‡å³é”®ï¼Œæ–°å»ºJavaClassï¼Œé€‰æ‹©Annotationã€‚

```java
import java.lang.annotation.*;

@Target(ElementType.METHOD)
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface LogExecution {
    String value() default "default";
}

```

ğŸ§ª **æ³¨è§£çš„ä½¿ç”¨**

:white_check_mark: 1ã€åˆ›å»ºå…ƒæ³¨è§£

```java
package com.annotatePart;


import java.lang.annotation.*;

@Retention(RetentionPolicy.SOURCE) // ä½œç”¨æ—¶æœºåœ¨æºä»£ç æ—¶
@Documented // ç”Ÿæˆæ–‡æ¡£
@Deprecated // è¿‡æ—¶æ ‡è®°
@Target({ElementType.TYPE,ElementType.FIELD,ElementType.METHOD}) // ä¿®é¥°èŒƒå›´ä¸ºç±»ï¼Œå±æ€§ï¼Œæ–¹æ³•
public @interface A1 {

}
```

:white_check_mark: 2ã€ä½¿ç”¨æ³¨è§£

```java
package com.annotatePart;

@A1
public class TestAnnotation1 {
    @A1
    String name;

    @A1
    public void getName(){
        System.out.println("ä½ çš„åå­—");
    }
}
```

## æ³¨è§£å±æ€§

> æ³¨è§£ä¸­çš„â€œå±æ€§â€ï¼Œå…¶å®å°±æ˜¯ä¸€ç»„**æ²¡æœ‰æ–¹æ³•ä½“çš„æŠ½è±¡æ–¹æ³•**ï¼Œè¿™äº›æ–¹æ³•çš„åå­—å°±æ˜¯å±æ€§åï¼Œå®ƒä»¬å¯ä»¥æœ‰é»˜è®¤å€¼ã€‚

ç¤ºä¾‹ï¼š

```java
public @interface MyAnnotation {
    String name();          // å±æ€§1ï¼šå¿…é¡»èµ‹å€¼
    int age() default 18;   // å±æ€§2ï¼šæœ‰é»˜è®¤å€¼ï¼Œå¯é€‰èµ‹å€¼
}
```

è¿™æ®µä»£ç å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£ `@MyAnnotation`ï¼Œå®ƒæœ‰ä¸¤ä¸ªâ€œå±æ€§â€ï¼š

- `name()`ï¼šæ²¡æœ‰é»˜è®¤å€¼ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ³¨è§£æ—¶ **å¿…é¡»èµ‹å€¼**ã€‚
- `age()`ï¼šæœ‰é»˜è®¤å€¼ 18ï¼Œå› æ­¤åœ¨ä½¿ç”¨æ—¶å¯ä»¥çœç•¥ã€‚

### æ³¨è§£å±æ€§ç±»å‹

>  æ³¨è§£ä¸­çš„å±æ€§ï¼ˆå³ä½ åœ¨æ³¨è§£é‡Œå®šä¹‰çš„æ–¹æ³•ï¼‰**åªèƒ½æ˜¯ç¼–è¯‘å™¨å…è®¸çš„â€œå¸¸é‡è¡¨è¾¾å¼ç±»å‹â€**ï¼Œè€Œä¸æ˜¯ä»»æ„ Java ç±»å‹ã€‚

:white_check_mark: å…è®¸çš„å±æ€§ç±»å‹ï¼š

| ç±»å‹ç±»åˆ«       | ç¤ºä¾‹                                                |
| -------------- | --------------------------------------------------- |
| åŸºæœ¬ç±»å‹       | `int`, `long`, `boolean`, `float`, ç­‰ç­‰             |
| `String`       | `"abc"`                                             |
| `Class`        | `Class<?>`, å¦‚ `String.class`                       |
| æšä¸¾ç±»å‹       | è‡ªå®šä¹‰æšä¸¾ï¼Œå¦‚ `Gender.MALE`                        |
| æ³¨è§£ç±»å‹       | å¦ä¸€ä¸ªæ³¨è§£ï¼Œå¦‚ `@MyNestedAnnotation`                |
| ä¸Šè¿°ç±»å‹çš„æ•°ç»„ | å¦‚ `int[]`, `String[]`, `Class[]`, `MyAnnotation[]` |

âŒ ä¸å…è®¸çš„å±æ€§ç±»å‹ï¼š

| ç±»å‹                 | ä¸ºä»€ä¹ˆä¸å…è®¸ï¼Ÿ                                            |
| -------------------- | --------------------------------------------------------- |
| `List`ã€`Map`ã€`Set` | å› ä¸ºå®ƒä»¬æ˜¯å¯¹è±¡ï¼Œåœ¨æ³¨è§£ä¸­ä¸å¯ç”¨è¿è¡Œæ—¶æ„é€ å¯¹è±¡              |
| ä»»æ„æ™®é€šå¯¹è±¡ç±»å‹     | æ¯”å¦‚ `Person`ã€`Date`ã€`User`ï¼Œè¿™äº›ä¸æ˜¯â€œç¼–è¯‘æ—¶å¸¸é‡â€       |
| æ¥å£æˆ–è‡ªå®šä¹‰ç±»å¯¹è±¡   | åŒæ ·ä¸å¯åœ¨æ³¨è§£å±æ€§ä¸­åˆå§‹åŒ–ï¼Œå¦‚ `Runnable`ã€`MyService` ç­‰ |

ğŸ§  ä¸ºä»€ä¹ˆä¸å…è®¸è¿™äº›ç±»å‹ï¼Ÿ

1. **æ³¨è§£çš„å±æ€§å€¼å¿…é¡»æ˜¯ç¼–è¯‘æœŸå¸¸é‡**ï¼Œä¹Ÿå°±æ˜¯è¯´å¿…é¡»åœ¨ `.class` æ–‡ä»¶ä¸­èƒ½ç›´æ¥ä¿å­˜ä¸‹æ¥çš„å€¼ã€‚
2. `List/Map/Set`ã€æ™®é€šå¯¹è±¡ç±»å‹å¹¶ä¸æ˜¯å¸¸é‡ï¼Œ**éœ€è¦è¿è¡Œæ—¶æ„é€ **ï¼Œè€Œæ³¨è§£æœ¬è´¨ä¸Šæ˜¯ç¼–è¯‘æœŸå·¥å…·çš„â€œæ ‡ç­¾â€ï¼Œä¸èƒ½åŒ…å«è¿è¡Œæ—¶ä»£ç è¡Œä¸ºã€‚

:sparkle: **æ³¨è§£ä¸­å¯ä»¥å†™æ–¹æ³•å—**

> æ³¨è§£å†…éƒ¨çš„è¿™äº›æ‰€è°“â€œæ–¹æ³•â€ï¼Œæœ¬è´¨ä¸Šä¸æ˜¯æ­£å¸¸ Java æ–¹æ³•ï¼ˆæ²¡æœ‰æ–¹æ³•ä½“ï¼‰ï¼Œå®ƒä»¬å°±æ˜¯**å±æ€§å£°æ˜**ã€‚

å› æ­¤ï¼Œæ³¨è§£ä¸­ **ä¸èƒ½å†™å¸¦æ–¹æ³•ä½“çš„æ–¹æ³•ï¼Œä¹Ÿä¸èƒ½å®šä¹‰æ„é€ æ–¹æ³•æˆ–é™æ€æ–¹æ³•**ã€‚

:label: **æ³¨è§£ä¸­ä¸èƒ½å†™çš„å†…å®¹ï¼š**

| å†…å®¹         | èƒ½å¦å†™ï¼Ÿ | åŸå›                                        |
| ------------ | -------- | ------------------------------------------ |
| æ™®é€šæ–¹æ³•     | âŒ        | æ³¨è§£æ¥å£ä¸èƒ½æœ‰æ–¹æ³•ä½“                       |
| æ„é€ æ–¹æ³•     | âŒ        | æ³¨è§£æœ¬è´¨ä¸Šæ˜¯æ¥å£ï¼Œä¸èƒ½æœ‰æ„é€ å™¨             |
| é™æ€æ–¹æ³•     | âŒ        | æ³¨è§£ä¸èƒ½æœ‰ static ä»£ç å—æˆ– static æ–¹æ³•     |
| å­—æ®µï¼ˆå˜é‡ï¼‰ | âŒ        | æ³¨è§£ä¸­ä¸èƒ½å®šä¹‰å­—æ®µï¼Œåªèƒ½å®šä¹‰å±æ€§ï¼ˆå³æ–¹æ³•ï¼‰ |

### æ³¨è§£å±æ€§èµ‹å€¼

> æ³¨è§£ä¸­çš„æ¯ä¸€ä¸ªå±æ€§å¿…é¡»èµ‹å€¼ï¼Œå¦åˆ™å°†æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œé™¤éç»™å±æ€§ä½¿ç”¨defaultå…³é”®å­—åŠ ä¸Šé»˜è®¤å€¼ï¼›
>
> å¦‚æœæ³¨è§£ä¸­åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œå¹¶ä¸”å±æ€§åä¸ºvalueï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å†™å€¼ï¼Œå…¶ä»–çš„æƒ…å†µéƒ½å¿…é¡»å†™ä¸ºå±æ€§å = å±æ€§å€¼ï¼›
>
> å¦‚æœå±æ€§ä¸ºæ•°ç»„ï¼Œå•ä¸ªå…ƒç´ ç›´æ¥å†™å€¼ï¼Œå¤šä¸ªå…ƒç´ ä½¿ç”¨å¤§æ‹¬å·åŒ…æ‹¬ï¼Œé€—å·åˆ†å‰²è¿›è¡Œä¹¦å†™ï¼›

æœ‰ä¸‰ç§æ–¹å¼ï¼š

1. **å…¨éƒ¨å±æ€§èµ‹å€¼**

```java
String name();
int age();


String [] value();
```

```java
// å½“æ³¨è§£å±æ€§ä¸ºå¤šä¸ª
@MyAnnotation1(name = "Tom", age = 20)

// å½“æ³¨è§£å±æ€§ä¸ºæ•°ç»„
@MyAnnotation2({"Tom", "20"})
```

2. **åªèµ‹å€¼å¿…é¡»çš„å±æ€§**

```java
@MyAnnotation(name = "Alice") // age ä½¿ç”¨é»˜è®¤å€¼
```

3. **å¦‚æœåªæœ‰ä¸€ä¸ªå±æ€§åä¸º `value`ï¼Œå¯ä»¥ç®€å†™**

```java
public @interface Hello {
    String value();
}
@Hello("ä½ å¥½") // ç­‰ä»·äº @Hello(value = "ä½ å¥½")
```

ğŸ§ª **ç¤ºä¾‹ï¼šå®Œæ•´æ³¨è§£å®šä¹‰å’Œä½¿ç”¨**

```java
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
public @interface PersonInfo {
    String name();
    int age() default 20;
    Gender gender() default Gender.MALE;
    String[] tags() default {};
}

enum Gender {
    MALE, FEMALE
}
```

ä½¿ç”¨ï¼š

```java
@PersonInfo(name = "Tom", age = 30, gender = Gender.MALE, tags = {"developer", "java"})
public class User {}
```

## æ³¨è§£å®ä¾‹æ–¹æ³•

é€šè¿‡åå°„è·å–

```java
field.getAnnotation(...) è¿”å›çš„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æ³¨è§£å®ä¾‹å¯¹è±¡ã€‚

æ³¨è§£å®ä¾‹å¯¹è±¡çš„æ–¹æ³•å°±æ˜¯ä½ åœ¨ @interface ä¸­å®šä¹‰çš„å±æ€§ã€‚

å¿…é¡» @Retention(RetentionPolicy.RUNTIME) æ‰èƒ½åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„è·å–ã€‚

å¦‚æœå­—æ®µä¸Šæ²¡æœ‰è¯¥æ³¨è§£ï¼Œè¿”å› nullã€‚
```

ç¤ºä¾‹ï¼š

1ã€å®šä¹‰æ³¨è§£ç±»

```java
@Retention(RetentionPolicy.RUNTIME) // å¿…é¡»æ˜¯ RUNTIMEï¼Œå¦åˆ™è¿è¡Œæ—¶æ‹¿ä¸åˆ°
@Target(ElementType.FIELD) // ä½œç”¨äºå­—æ®µ
public @interface UserName {
    String value() default "";
}
```

2ã€åœ¨ç±»ä¸­ä½¿ç”¨æ³¨è§£

```java
public class Demo {
    @UserName("å¼ ä¸‰")
    private String name;

    public static void main(String[] args) throws Exception {
        Field field = Demo.class.getDeclaredField("name");

        // è·å–æ³¨è§£å®ä¾‹
        UserName username = field.getAnnotation(UserName.class);

        if (username != null) {
            System.out.println("å­—æ®µä¸Šçš„ç”¨æˆ·å: " + username.value());
            System.out.println("æ³¨è§£ç±»å‹: " + username.annotationType());
        } else {
            System.out.println("æ²¡æœ‰æ‰¾åˆ° UserName æ³¨è§£");
        }
    }
}
```

ğŸš¨ é‡ç‚¹è®°å¿†

- `field.getAnnotation(...)` è¿”å›çš„ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯**æ³¨è§£å®ä¾‹å¯¹è±¡**ã€‚
- æ³¨è§£å®ä¾‹å¯¹è±¡çš„æ–¹æ³•å°±æ˜¯ä½ åœ¨ `@interface` ä¸­å®šä¹‰çš„å±æ€§ã€‚
- **å¿…é¡»** `@Retention(RetentionPolicy.RUNTIME)` æ‰èƒ½åœ¨è¿è¡Œæ—¶é€šè¿‡åå°„è·å–ã€‚
- å¦‚æœå­—æ®µä¸Šæ²¡æœ‰è¯¥æ³¨è§£ï¼Œè¿”å› `null`ã€‚
