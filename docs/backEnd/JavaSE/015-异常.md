# å¼‚å¸¸

## æ¦‚è¿°åŠä½“ç³»ç»“æ„

```java
Exceptionï¼šå¯ä»¥æ•è·å¼‚å¸¸ï¼Œè¿›è¡Œè§£å†³ã€‚
Errorï¼šä½¿ç”¨ä»£ç è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œä¾‹å¦‚å†…å­˜æº¢å‡ºè¿™ç±»çš„é—®é¢˜ï¼Œç¡¬ä»¶çº§åˆ«çš„é—®é¢˜ã€‚ä¾‹å¦‚ StackOverflowErrorï¼Œ
    ä½¿ç”¨ null.æˆå‘˜æ–¹æ³•
```

ä¸»è¦è®°4ç±»å¸¸è§å¼‚å¸¸

```java
Objectä¸‹è¾¹æœ‰Throwableå¼‚å¸¸ï¼ŒThrowableå¼‚å¸¸ä¸‹è¾¹åˆ†ä¸º: Errorå’ŒExceptionï¼Œ
Exceptionå¼‚å¸¸ä¸‹è¾¹æœ‰RuntimeExceptionå¼‚å¸¸ï¼Œå¸¸ç”¨åˆ°çš„å¼‚å¸¸éƒ½æ˜¯RuntimeExceptionå¼‚å¸¸ã€‚
    
```

Javaä¸­çš„5ç§å¸¸è§å¼‚å¸¸

![image-20250708095015055](https://2216847528.oss-cn-beijing.aliyuncs.com/asset/image-20250708095015055.png)

## Try Catchå¼‚å¸¸

ä½¿ç”¨ é¡¶çº§çˆ¶ç±»ä¸­çš„ æ–¹æ³•æ‰“å°å‡ºå‡ºç°å¼‚å¸¸çš„ä»£ç è¡Œæ•°ã€‚

åªæœ‰æ•è·åˆ°äº†åŒ¹é…åˆ°çš„å¼‚å¸¸æ‰ä¸ä¼šä¸­æ–­å¼‚å¸¸ï¼Œå¦‚æœå‡ºç°å¼‚å¸¸çš„ç±»å‹æ²¡æœ‰æ•è·åˆ°ï¼Œåˆ™ä»ç„¶ä¼šä¸­æ–­ç¨‹åºã€‚

```java
System.out.println(),é»‘è‰²é¢œè‰²çš„å­—ä½“æ˜¯ç”±ä¸€ä¸ªçº¿ç¨‹å¤„ç†çš„ã€‚
System.err.println(),çº¢è‰²é¢œè‰²çš„å­—ä½“æ˜¯ç”±å¦ä¸€ä¸ªçº¿ç¨‹å¤„ç†çš„ã€‚
```

### æƒ…å†µ1

> ä½¿ç”¨å•ä¸ªcatchæ•è·å¼‚å¸¸ï¼Œå¦‚æœå‡ºç°çš„å¼‚å¸¸å’Œæ•è·çš„å¼‚å¸¸ç±»å‹åŒ¹é…ï¼Œåˆ™å¯ä»¥æ­£å¸¸æ•è·ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥é¡ºåˆ©æ‰§è¡Œå®Œæ¯•ã€‚
>
> å¦‚æœå‡ºç°çš„å¼‚å¸¸å’Œæ•è·çš„å¼‚å¸¸ç±»å‹ä¸åŒ¹é…ï¼Œåˆ™ç¨‹åºå°†ä¾ç„¶ä¸­æ–­ã€‚

**try-catchçš„ä½¿ç”¨**

```java
tryä»£ç å—ä¸­å­˜æ”¾å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
catchç”¨äºæ•è·å¼‚å¸¸
    
try æˆ–è€… catch å‡ä¸èƒ½å•ç‹¬ä½¿ç”¨
try å¿…é¡»ç»“åˆ catch  æˆ–è€… catch -finally  æˆ–è€…  finally
```

try-catchä½¿ç”¨ç¤ºä¾‹1

```java
package com.exception.Test01;

import java.util.InputMismatchException;
import java.util.Scanner;

/**
 * try-catch
 * try ä»£ç å—ä¸­å­˜æ”¾å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸çš„ä»£ç 
 * catchç”¨äºæ•è·å¼‚å¸¸
 * tryæˆ–è€…catchå‡ä¸èƒ½å•ç‹¬ä½¿ç”¨ tryå¿…é¡»ç»“åˆcatchæˆ–è€…catch-finally æˆ–è€… finally
 *
 * æƒ…å†µ1 ï¼š
 * ä½¿ç”¨å•ä¸ªcatchæ•è·å¼‚å¸¸ å¦‚æœå‡ºç°çš„å¼‚å¸¸å’Œæ•è·çš„å¼‚å¸¸ç±»å‹åŒ¹é… åˆ™å¯ä»¥æ­£å¸¸æ•è·
 * ä½¿å¾—ç¨‹åºå¯ä»¥é¡ºåˆ©æ‰§è¡Œå®Œæ¯• å¦‚æœå‡ºç°çš„å¼‚å¸¸å’Œæ•è·çš„å¼‚å¸¸ç±»å‹ä¸åŒ¹é… åˆ™ç¨‹åºå°†ä¾ç„¶ä¸­æ–­
 *
 */
public class TestTryCatch {
    public static void main(String[] args) {
        try{
            Scanner in = new Scanner(System.in);
            System.out.print("è¯·è¾“å…¥è¢«é™¤æ•°:");
            int num1 = in.nextInt();
            System.out.print("è¯·è¾“å…¥é™¤æ•°:");
            int num2 = in.nextInt();
            System.out.println(num1+"/"+ num2 +"="+ num1/ num2);
        }catch(InputMismatchException e){ // æ•è·è¾“å…¥ä¸åŒ¹é…ç±»å‹çš„å¼‚å¸¸
            e.printStackTrace(); // æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯
        }
        System.out.println("æ„Ÿè°¢ä½¿ç”¨æœ¬ç¨‹åºï¼"); // æ•è·åˆ°äº†åŒ¹é…çš„å¼‚å¸¸å¯ä»¥æ­£å¸¸è¿è¡Œ
    }
}

```

### æƒ…å†µ2

> ä½¿ç”¨å¤šä¸ªcatch å—æ¥æ•è·å¼‚å¸¸ï¼ŒæŒ‰ç…§ä¹¦å†™é¡ºåºï¼Œä»å‰å¾€ååŒ¹é…ï¼ŒåªåŒ¹é…ç¬¬ä¸€ä¸ªç›¸ç¬¦çš„å¼‚å¸¸ï¼Œç„¶åå°±é€€å‡ºtry-catchç»“æ„ã€‚
>
> `å¤šä¸ªcatchå—ä¹¦å†™é¡ºåº` å…ˆå†™å­ç±» åå†™ çˆ¶ç±»ã€‚

```java
catch(å¼‚å¸¸ç±»å å‚æ•°){
	
}
```

catchå¤šä¸ªå¼‚å¸¸ç¤ºä¾‹ï¼š

```java
package com.exception.Test01;

import java.util.InputMismatchException;
import java.util.Scanner;

/**
 * ä½¿ç”¨å¤šä¸ªcatch å—æ¥æ•è·å¼‚å¸¸ æŒ‰ç…§ä¹¦å†™é¡ºåº ä»å‰å¾€ååŒ¹é… åªåŒ¹é…ç¬¬ä¸€ä¸ªç›¸ç¬¦çš„å¼‚å¸¸.ç„¶åå°±é€€å‡ºtry-catchç»“æ„
 *
 */
public class TestTryCatch2 {
    public static void main(String[] args) {
        try{
            Scanner in = new Scanner(System.in);
            System.out.print("è¯·è¾“å…¥è¢«é™¤æ•°:");
            int num1 = in.nextInt();
            System.out.print("è¯·è¾“å…¥é™¤æ•°:");
            int num2 = in.nextInt();
            System.out.println(num1+"/"+ num2 +"="+ num1/ num2);
        } catch(InputMismatchException e){ // æ•è·è¾“å…¥ä¸åŒ¹é…å¼‚å¸¸
            System.err.println("å‡ºç°äº†è¾“å…¥ä¸åŒ¹é…å¼‚å¸¸"); //  e.printStackTrace();
        } catch(ArithmeticException e){ // æ•è·è¢«é™¤æ•°ä¸º0çš„å¼‚å¸¸
            System.err.println(e.getMessage()); // è·å– å¼‚å¸¸messageä¿¡æ¯
            e.printStackTrace();//System.err.println("å‡ºç°äº†ç®—æ•°è¿ç®—å¼‚å¸¸");//
        }catch(Exception e){ // æ•è·é¡¶å±‚å¼‚å¸¸
            e.printStackTrace();
        }

        System.out.println("æ„Ÿè°¢ä½¿ç”¨æœ¬ç¨‹åºï¼");
    }
}

```

## finallyå¼‚å¸¸

> finally è¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ ä»¥åŠ å¼‚å¸¸æ˜¯å¦è¢«æ•è· éƒ½å°†æ‰§è¡Œçš„ä»£ç å—ã€‚
>
> finallyä¸èƒ½å•ç‹¬å‡ºç° å¿…é¡»ç»“åˆ try-catch  æˆ–è€… tryã€‚
>
> å› ä¸ºfinallyæœ€ç»ˆéƒ½å°†æ‰§è¡Œ æ‰€ä»¥é€šå¸¸ç”¨äºæ‰§è¡Œä¸€äº›å…³é—­èµ„æºçš„æ“ä½œ æ¯”å¦‚ å…³é—­æµ å…³é—­æ•°æ®åº“è¿æ¥å¯¹è±¡ç­‰ç­‰ã€‚
>
> finallyä¸æ‰§è¡Œçš„å”¯ä¸€æƒ…å†µï¼šåœ¨æ‰§è¡Œfinallyä¹‹å‰é€€å‡ºJVMè™šæ‹Ÿæœºã€‚ï¼ˆSystem.exit(0)ï¼‰

System.exit(int status) : intç±»å‹çš„çŠ¶æ€ç å«ä¹‰ï¼š0è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œé0è¡¨ç¤ºéæ­£å¸¸é€€å‡ºã€‚

finallyç¤ºä¾‹ï¼š

```java
package com.exception.Test01;

import java.util.InputMismatchException;
import java.util.Scanner;

/**
 *   finally è¡¨ç¤ºä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ ä»¥åŠ å¼‚å¸¸æ˜¯å¦è¢«æ•è· éƒ½å°†æ‰§è¡Œçš„ä»£ç å—
 *    finallyä¸èƒ½å•ç‹¬å‡ºç° å¿…é¡»ç»“åˆ try-catch  æˆ–è€… try
 *    å› ä¸ºfinallyæœ€ç»ˆéƒ½å°†æ‰§è¡Œ æ‰€ä»¥é€šå¸¸ç”¨äºæ‰§è¡Œä¸€äº›å…³é—­èµ„æºçš„æ“ä½œ æ¯”å¦‚ å…³é—­æµ å…³é—­æ•°æ®åº“è¿æ¥å¯¹è±¡ç­‰ç­‰
 *
 *    finallyä¸æ‰§è¡Œçš„å”¯ä¸€æƒ…å†µï¼šåœ¨æ‰§è¡Œfinallyä¹‹å‰é€€å‡ºJVMè™šæ‹Ÿæœº
 *
 *    System.exit(int status) : intç±»å‹çš„çŠ¶æ€ç å«ä¹‰ï¼š0è¡¨ç¤ºæ­£å¸¸é€€å‡º é0è¡¨ç¤ºéæ­£å¸¸é€€å‡º
 */

public class TestFinally {
    public static void main(String[] args) {
        try{
            Scanner in = new Scanner(System.in);
            System.out.print("è¯·è¾“å…¥è¢«é™¤æ•°:");
            int num1 = in.nextInt();
            System.out.print("è¯·è¾“å…¥é™¤æ•°:");
            int num2 = in.nextInt();
            System.out.println(num1+"/"+ num2 +"="+ num1/ num2);
            // é€€å‡ºè™šæ‹Ÿæœº System.exit(int status) : intç±»å‹çš„çŠ¶æ€ç å«ä¹‰ï¼š0è¡¨ç¤ºæ­£å¸¸é€€å‡º é0è¡¨ç¤ºéæ­£å¸¸é€€å‡º
            System.exit(231321);
        }catch (InputMismatchException e){
            e.printStackTrace(); // æ‰“å°å¼‚å¸¸å †æ ˆä¿¡æ¯,é€šè¿‡ jdkæ–‡æ¡£ä¸­çš„ Throwableé¡¶çº§å¼‚å¸¸ç±»ä¸­çš„æ–¹æ³•æ‰¾åˆ°çš„
        }finally { // ä¸ç®¡æ˜¯å¦å‡ºç°å¼‚å¸¸ ä»¥åŠ å¼‚å¸¸æ˜¯å¦è¢«æ•è· éƒ½å°†æ‰§è¡Œçš„ä»£ç å—,é™¤éå‡ºç° é€€å‡ºè™šæ‹Ÿæœº
            System.out.println("æ„Ÿè°¢ä½¿ç”¨æœ¬ç¨‹åºï¼");
        }
    }
}

```

### finallyç›¸å…³é—®é¢˜

tryä¸­å­˜åœ¨return æ˜¯å¦è¿˜æ‰§è¡Œfinally 

```java
æ‰§è¡Œ
```

try-catch-finallyä¸­ï¼Œå¦‚æœtryä¸­å·²ç»returnäº†å€¼ï¼Œé‚£ä¹ˆfinallyä¸­å¯¹è¿”å›å€¼çš„æ“ä½œä¼šä¸ä¼šæ”¹å˜è¿”å›å€¼ï¼Ÿ

```java
å¦‚æœä¸ºåŸºæœ¬æ•°æ®ç±»å‹ ä¸ä¼šæ”¹å˜
å¦‚æœä¸ºå¼•ç”¨æ•°æ®ç±»å‹ ä¼šæ”¹å˜    
```

**finally returnç¤ºä¾‹**

```java
package com.exception.Test01;

import java.util.Arrays;

public class TestFinally2 {
    //
    public static int m1(){
        int num = 10; // åŸºæœ¬æ•°æ®ç±»å‹
        try{
            num++;  // 11
            return num; // 11 è¿™æ—¶æ–¹æ³•å°±å‡ºæ ˆäº†,è¿”å›åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹å°±æ˜¯å€¼ã€‚
        }catch(Exception e){ // æ•è·æ£€æŸ¥å‹å¼‚å¸¸
            e.printStackTrace(); // æ‰“å°å †æ ˆå¼‚å¸¸ä¿¡æ¯
        }finally{
            num++; // 12 ç”±äºå­˜åœ¨finallyå…³é”®å­—,numä¼šåŠ 1,ä½†æ˜¯å·²ç»è¿”å›äº†11,ä¸ä¼šè¿”å›12
            // return num; // å¦‚æœè¿™é‡Œè¿”å›äº† num åˆ™è¿™é‡Œ æœ€åaçš„å€¼ä¸º12
        }
        return num; // 11 è¿™ä¸ªè¯­å¥ä¸ä¼šè¢«æ‰§è¡Œ
    }
    public static int[] m2(){
        int [] nums = {1,2,3,4,5};
        try{
            for (int i = 0; i < nums.length; i++) { // éå†æ•´ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åŠ 1
                nums[i]++;
            }
            return nums; // è¿”å›æ•°ç»„åœ°å€ï¼Œåœ°å€ä¸ä¼šå˜
        }catch (Exception e){
            // æ‰“å°å †æ ˆä¸­çš„ä¿¡æ¯
            e.printStackTrace();
        }finally {
            for (int i = 0; i < nums.length; i++) { // å†æ¬¡éå†æ•´ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ åŠ 1
                nums[i]++; // å¯¹æ•°ç»„å¯¹è±¡ä¸­çš„å†…å®¹è¿›è¡Œäº†æ›´æ”¹ï¼Œä¹‹å‰return çš„æ•°ç»„åœ°å€æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å†…å®¹å‘ç”Ÿäº†æ”¹å˜
            }
        }
        // è¿”å›nums å¯¹è±¡
        return nums;
    }
    // æµ‹è¯•ç±»
    public static void main(String[] args) {
        int a = m1(); // 11
        System.out.println(a); // 11

        int [] nums = m2(); // [3,4,5,6,7]
        System.out.println(Arrays.toString(nums)); // [3,4,5,6,7]
    }
}

```

try-catchå—ä¸­å­˜åœ¨returnè¯­å¥ï¼Œæ˜¯å¦è¿˜æ‰§è¡Œfinallyå—ï¼Œå¦‚æœæ‰§è¡Œï¼Œè¯´å‡ºæ‰§è¡Œé¡ºåºã€‚

```java
æ‰§è¡Œ finallyï¼Œæ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œreturnï¼Œå†æ‰§è¡Œfinallyã€‚
returnä¹‹åï¼Œä¹‹å‰çš„å€¼ï¼Œçœ‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ã€‚
    åŸºæœ¬æ•°æ®ç±»å‹returnä¹‹åï¼Œå€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚
    å¼•ç”¨æ•°æ®ç±»å‹returnä¹‹åï¼Œåœ°å€ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå†…å®¹ä¼šå‘ç”Ÿæ”¹å˜ã€‚
```

try-catch-finallyå—ä¸­ï¼Œfinallyå—ä¸­å”¯ä¸€ä¸æ‰§è¡Œçš„æƒ…å†µæ˜¯ä»€ä¹ˆï¼Ÿ

```java
JVMé€€å‡ºè™šæ‹Ÿæœº
```

## throwå’Œthrows

### throwsè§„åˆ™

> 1ã€ç”¨äºåœ¨æ–¹æ³•å£°æ˜çš„ä½ç½®ï¼Œå‚æ•°åˆ—è¡¨ä¹‹åï¼Œå£°æ˜å½“å‰æ–¹æ³•å¯èƒ½ä¼šå‡ºç°å“ªäº›å¼‚å¸¸ï¼Œå¯ä»¥å£°æ˜å¤šä¸ªå¼‚å¸¸ï¼Œ
>
> å¤šä¸ªå¼‚å¸¸ä½¿ç”¨é€—å·åˆ†å‰²ã€‚
>
> 2ã€æ–¹æ³•è°ƒç”¨è€…æ ¹æ®å£°æ˜çš„å¼‚å¸¸ç±»å‹ä¸åŒä¼šåšå‡ºä¸åŒçš„å¤„ç†ã€‚
>
> 3ã€è¿è¡Œæ—¶å¼‚å¸¸(RuntimeExceptionåŠå…¶å­ç±»)ï¼šè°ƒç”¨è€…ä¸å¿…å¤„ç†ã€‚
>
> 4ã€æ£€æŸ¥å¼‚å¸¸(é™¤äº†è¿è¡Œæ—¶å¼‚å¸¸ä»¥å¤–çš„å…¶ä»–å¼‚å¸¸å°±å±äºæ£€æŸ¥å¼‚å¸¸CheckedException)ï¼šè°ƒç”¨è€…å¿…é¡»å¤„ç†ã€‚

å¤„ç†å¼‚å¸¸çš„æ–¹å¼

> ä¸¤ç§å¤„ç†æ–¹å¼ï¼š
>
> 1.ä½¿ç”¨try-catchå¤„ç†ã€‚
>
> 2.ç»§ç»­åœ¨mainæ–¹æ³•ä¸Šå£°æ˜ å±äºå£°æ˜ç»™JVMè™šæ‹Ÿæœº (å…¶å®å±äºä¸å¤„ç†)ã€‚

throwsç¤ºä¾‹ï¼š

```java
package com.throwsPart.Test01;

/**
 * è¿è¡Œæ—¶å¼‚å¸¸(RuntimeExceptionåŠå…¶å­ç±»)ï¼šè°ƒç”¨è€…ä¸å¿…å¤„ç†
 *  *  æ£€æŸ¥å¼‚å¸¸(é™¤äº†è¿è¡Œæ—¶å¼‚å¸¸ä»¥å¤–çš„å…¶ä»–å¼‚å¸¸å°±å±äºæ£€æŸ¥å¼‚å¸¸CheckedException)ï¼šè°ƒç”¨è€…å¿…é¡»å¤„ç†
 *  *    ä¸¤ç§å¤„ç†æ–¹å¼ï¼š
 *  *       1.ä½¿ç”¨try-catchå¤„ç†
 *  *       2.ç»§ç»­åœ¨mainæ–¹æ³•ä¸Šå£°æ˜ å±äºå£°æ˜ç»™JVMè™šæ‹Ÿæœº (å…¶å®å±äºä¸å¤„ç†)
 *
 *  throw:ç”¨äºåœ¨æ–¹æ³•ä½“å†…æŠ›å‡ºå¼‚å¸¸,ä¸€å¥åªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
 *    æ ¹æ®æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸åŒ éœ€è¦åšå‡ºä¸åŒçš„å¤„ç†
 *       å¦‚æœæŠ›å‡ºçš„ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ åˆ™æ–¹æ³•ä¸Šä¸å¿…å£°æ˜
 *       å¦‚æœæŠ›å‡ºçš„ä¸ºæ£€æŸ¥å¼‚å¸¸ åˆ™å¿…é¡»åœ¨æ–¹æ³•ä¸Šå£°æ˜
 *
 */

import java.util.InputMismatchException;

public class TestThrows {
    // é€šè¿‡ throws å£°æ˜å½“å‰æ–¹æ³•å¯èƒ½ä¼šå‡ºç°å“ªäº›å¼‚å¸¸
    // å¯ä»¥å£°æ˜å¤šä¸ªå¼‚å¸¸,ä½¿ç”¨é€—å·åˆ†å‰²
    public static void m1() throws InputMismatchException,ArithmeticException { // è¿è¡Œæ—¶å¼‚å¸¸(RuntimeExceptionåŠå…¶å­ç±»)
        System.out.println("m1æ–¹æ³•æ‰§è¡Œ");
    }
    public static void m2() throws ClassNotFoundException{ // æ£€æŸ¥å¼‚å¸¸
        System.out.println("m2æ–¹æ³•æ‰§è¡Œ");
    }
    // æ–¹æ³•è°ƒç”¨è€…æ ¹æ®å£°æ˜çš„å¼‚å¸¸ç±»å‹ä¸åŒä¼šåšå‡ºä¸åŒçš„å¤„ç†
    public static void main(String[] args) {
        m1(); // è°ƒç”¨m1æ–¹æ³•ï¼Œè¿è¡Œæ—¶å¼‚å¸¸ä¸ç”¨å¤„ç†
        try{
            m2();
        }catch (ClassNotFoundException e){ // æ£€æŸ¥å¼‚å¸¸éœ€è¦æ•è·å¤„ç†
            throw new RuntimeException(e);
        }
    }

}

```

### throwè§„åˆ™

> ç”¨äºåœ¨æ–¹æ³•ä½“å†…æŠ›å‡ºå¼‚å¸¸,ä¸€å¥åªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
>
> æ ¹æ®æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸åŒ éœ€è¦åšå‡ºä¸åŒçš„å¤„ç†ï¼š
>
>  *  å¦‚æœæŠ›å‡ºçš„ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ åˆ™æ–¹æ³•ä¸Šä¸å¿…å£°æ˜
>  *  å¦‚æœæŠ›å‡ºçš„ä¸ºæ£€æŸ¥å¼‚å¸¸ åˆ™å¿…é¡»åœ¨æ–¹æ³•ä¸Šå£°æ˜

```java
package com.throwsPart.Test01;

/**
 *  throw:ç”¨äºåœ¨æ–¹æ³•ä½“å†…æŠ›å‡ºå¼‚å¸¸,ä¸€å¥åªèƒ½æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚
 *    æ ¹æ®æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸åŒ éœ€è¦åšå‡ºä¸åŒçš„å¤„ç†
 *       å¦‚æœæŠ›å‡ºçš„ä¸ºè¿è¡Œæ—¶å¼‚å¸¸ åˆ™æ–¹æ³•ä¸Šä¸å¿…å£°æ˜
 *       å¦‚æœæŠ›å‡ºçš„ä¸ºæ£€æŸ¥å¼‚å¸¸ åˆ™å¿…é¡»åœ¨æ–¹æ³•ä¸Šå£°æ˜
 */
public class TestThrow {
    // æŠ›å‡ºçš„æ˜¯è¿è¡Œæ—¶å¼‚å¸¸
    public static void m3(int age){
        if(age < 0 || age > 130){
            // æŠ›å‡º è¿è¡Œæ—¶å¼‚å¸¸
            throw new RuntimeException("å¹´é¾„ä¸åˆæ³•");
        }
    }
    // æŠ›å‡ºçš„æ˜¯ æ£€æŸ¥æ€§å¼‚å¸¸ï¼Œéœ€è¦åœ¨æ–¹æ³•ä¸Šåšå£°æ˜
    public static void m4(int age) throws Exception{
        if(age < 0 || age > 130){
            // æŠ›å‡º æ£€æŸ¥å‹å¼‚å¸¸
            throw new Exception("å¹´é¾„ä¸åˆæ³•");
        }
    }

    public static void main(String[] args) {
        // è°ƒç”¨m3æ–¹æ³•
        m3(18);
        // è°ƒç”¨m4æ–¹æ³•ï¼Œæ£€æŸ¥å‹å¼‚å¸¸ï¼Œå¿…é¡»å¤„ç†ã€‚
        try{
            m4(189);
        }catch (Exception e){
            throw new RuntimeException(e);
        }
    }
}

```

## è‡ªå®šä¹‰å¼‚å¸¸

å½“JDKæä¾›çš„å¼‚å¸¸ä¸èƒ½æ»¡è¶³å¼€å‘éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰å¼‚å¸¸ã€‚

è‡ªå®šä¹‰å¼‚å¸¸æ­¥éª¤ï¼š

> 1.ç»§æ‰¿å¼‚å¸¸çˆ¶ç±» Throwable ã€Exception ã€RuntimeException ä¸‰è€…å…¶ä¸­ä¹‹ä¸€ã€‚
>
> 2.è°ƒç”¨çˆ¶ç±»ä¸­çš„æœ‰å‚æ„é€ å®Œæˆå¼‚å¸¸ä¿¡æ¯çš„åˆå§‹åŒ–ã€‚

è‡ªå®šä¹‰å¼‚å¸¸ç¤ºä¾‹ï¼š

```java
package com.throwsPart.Test02;

public class Vtuber {
    private String name;
    private int age;
    private char sex;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    // ä½¿ç”¨ Throw æŠ›å‡ºå¼‚å¸¸
    public void setAge(int age){
        if(age > 0 && age < 130){
            this.age = age;
        }else{
            throw new InputAgeNumOutOfboundsException("å¹´é¾„ä¸åˆæ³•" + age);
        }

    }

    public char getSex() {
        return sex;
    }
    // ä½¿ç”¨ throws å£°æ˜å¼‚å¸¸
    public void setSex(char sex) throws InputSexException{
        if(sex == 'ç”·' || sex == 'å¥³'){
            this.sex = sex;
        }else{
            throw new InputSexException("æ€§åˆ«ä¸åˆæ³•" + sex);
        }
    }

    public Vtuber(String name, int age, char sex) {
        this.name = name;
        this.age = age;
        this.sex = sex;
    }

    public Vtuber() {
    }

    @Override
    public String toString() {
        return "Vtuber{" +
                "name='" + name + '\'' +
                ", age=" + age +
                ", sex=" + sex +
                '}';
    }
}

```

```java
package com.throwsPart.Test02;
// æ£€æŸ¥å‹å¼‚å¸¸
public class InputSexException extends Exception{

    public InputSexException(String message) {
        super(message);
    }
}

```

```java
package com.throwsPart.Test02;

// è‡ªå®šä¹‰ å¼‚å¸¸ ç»§æ‰¿ å¼‚å¸¸çˆ¶ç±»
public class InputAgeNumOutOfboundsException extends RuntimeException{

    // æœ‰å‚æ„é€ å®Œæˆå¼‚å¸¸ä¿¡æ¯çš„åˆå§‹åŒ–
    public InputAgeNumOutOfboundsException(String message) {
        // ä½¿ç”¨çˆ¶ç±»ä¸­æ„é€ æ–¹æ³•
        super(message);
    }
}

```

```java
package com.throwsPart.Test02;

public class TestVtuber {
    public static void main(String[] args) {
        Vtuber yousa = new Vtuber("sakuna",26,'å¥³');
        yousa.setAge(129);
        try{
            // å¯¹ æ£€æŸ¥å‹å¼‚å¸¸åš catchæ•è·
            yousa.setSex('å¥³');
        }catch (Exception e){
            e.printStackTrace();
        }

        System.out.println(yousa.toString());
        System.out.println("ç¨‹åºç»“æŸ");
    }
}

```

## ç§Ÿè½¦æ¡ˆä¾‹

```java
package com.Example.RentCar;

// æœºåŠ¨è½¦çˆ¶ç±»
public abstract class Vehicle {
    private String brand;
    private String vehicleId;
    private double dayRent;

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public String getVehicleId() {
        return vehicleId;
    }

    public void setVehicleId(String vehicleId) {
        this.vehicleId = vehicleId;
    }

    public double getDayRent() {
        return dayRent;
    }

    public void setDayRent(double dayRent) {
        this.dayRent = dayRent;
    }

    public Vehicle(String brand, String vehicleId, double dayRent) {
        this.brand = brand;
        this.vehicleId = vehicleId;
        this.dayRent = dayRent;
    }

    public Vehicle() {

    }

    @Override
    public String toString() {
        return "Vehicle{" +
                "brand='" + brand + '\'' +
                ", vehicleId='" + vehicleId + '\'' +
                ", dayRent=" + dayRent +
                '}';
    }

    // è®¡ç®—ç§Ÿé‡‘
    public abstract double getPrice(int days);
}

```

```java
package com.Example.RentCar;

public class Car extends Vehicle{
    private String type;

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public Car(String brand, String vehicleId, double dayRent, String type) {
        super(brand, vehicleId, dayRent);
        this.type = type;
    }

    public Car() {
    }

    @Override
    public String toString() {
        return "Car{" +
                "type='" + type + '\'' +
                '}';
    }

    @Override
    public double getPrice(int days) {
        double price = 0;
        if(days > 150){
            price = this.getDayRent() * days * 0.7;
        }else if(days > 30){
            price = this.getDayRent() * days * 0.8;
        }else if(days > 7){
            price = this.getDayRent() * days * 0.9;
        }else{
            price = this.getDayRent() * days;
        }
        return price;
    }
}

```

```java
package com.Example.RentCar;

public class Bus extends Vehicle{
    private int seatCount;

    public int getSeatCount() {
        return seatCount;
    }

    public void setSeatCount(int seatCount) {
        this.seatCount = seatCount;
    }

    public Bus(String brand, String vehicleId, double dayRent, int seatCount) {
        super(brand, vehicleId, dayRent);
        this.seatCount = seatCount;
    }

    public Bus() {
    }

    @Override
    public String toString() {
        return "Bus{" +
                "seatCount=" + seatCount +
                '}';
    }

    @Override
    public double getPrice(int days) {
        double price = 0;
        if(days >= 150){
            price = this.getDayRent() * days * 0.6;
        }else if(days >= 30){
            price = this.getDayRent() * days * 0.7;
        }else if(days >= 7){
            price = this.getDayRent() * days * 0.8;
        }else if(days >= 3){
            price = this.getDayRent() * days * 0.9;
        }else{
            price = this.getDayRent() * days;
        }
        return price;
    }

}

```

```java
package com.Example.RentCar;

// æœºåŠ¨è½¦ æ“ä½œç±»
public class VehicleOperation {
    // å®šä¹‰é™æ€å±æ€§
    static Vehicle [] vehicles = new Vehicle[8];

    // å®šä¹‰é™æ€ä»£ç å—ï¼ŒåŠ è½½ç±»æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚
    static{
        vehicles[0] = new Car("å®é©¬", "ç²¤A88888", 888, "X5");
        vehicles[1] = new Car("å®é©¬", "ç²¤A99999", 666, "740 Li");
        vehicles[2] = new Car("å¥”é©°", "ç²¤A12345", 456, "S500");
        vehicles[3] = new Car("å¥”é©°", "ç²¤A98765", 950, "S600");

        vehicles[4] = new Bus("é‡‘æ¯", "ç²¤B11111", 888, 16);
        vehicles[5] = new Bus("é‡‘æ¯", "ç²¤A22222", 666, 34);
        vehicles[6] = new Bus("æ¯”äºšè¿ª", "ç²¤A3333", 456, 16);
        vehicles[7] = new Bus("æ¯”äºšè¿ª", "ç²¤A55555", 950, 34);
    }

    // æ ¹æ®å‚æ•°è¿”å› æœºåŠ¨è½¦
    public Vehicle getVehicle(String brand,String type,int seatCount){
        // éå†æ•°ç»„
        for(int i = 0;i < vehicles.length;i++){
            // æ±½è½¦ç±»å‹
            if(vehicles[i] instanceof Car){
                // å¤šæ€å‘ä¸‹è½¬å‹
                Car car = (Car)vehicles[i];
                // åŒ¹é…åˆ°æ±½è½¦
                if(brand.equals(car.getBrand()) && type.equals(car.getType())){
                    return car;
                }
            }else{
                Bus bus = (Bus)vehicles[i];
                // åŒ¹é…åˆ°å¤§å·´
                if(brand.equals(bus.getBrand()) && seatCount == bus.getSeatCount()){
                    return bus;
                }
            }
        }
        // å¦åˆ™æ²¡æ‰¾åˆ°åˆ™è¿”å›null
        return null;
    }
}

```

```java
package com.Example.RentCar;

import java.util.Scanner;

public class TestVehicle {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.println("æ¬¢è¿ä½¿ç”¨æ­¤ç³»ç»Ÿ~~~");
        System.out.println("è¾“å…¥æ±½è½¦ç±»å‹ï¼š 1.è½¿è½¦ 2.å®¢è½¦");
        // è¾“å…¥é€‰æ‹©
        int choice = input.nextInt();

        String brand = ""; // ç”¨äºä¿å­˜ç”¨æˆ·é€‰æ‹©çš„å“ç‰Œ
        String type = "";// ç”¨äºä¿å­˜ç”¨æˆ·é€‰æ‹©çš„å‹å·
        int seatCount = 0; // ç”¨äºä¿å­˜ç”¨æˆ·é€‰æ‹©çš„åº§ä½æ•°

        if(choice == 1){
            // è½¿è½¦
            System.out.println("è¯·é€‰æ‹©æ±½è½¦å“ç‰Œï¼š1.å¥”é©° 2.å®é©¬");
            brand = input.nextInt() == 1 ? "å¥”é©°" : "å®é©¬";
            if(brand.equals("å¥”é©°")){
                System.out.println("è¯·é€‰æ‹©æ±½è½¦å‹å·ï¼š1.  S500  2.  S600");
                type = input.nextInt() == 1 ? "S500" : "S600";
            }else{
                System.out.println("è¯·é€‰æ‹©æ±½è½¦å‹å·ï¼š1.  X5  2.  740Li");
                type = input.nextInt() == 1 ? "X5" : "740Li";
            }
        }else{
            // å®¢è½¦
            System.out.println("è¯·é€‰æ‹©æ±½è½¦å“ç‰Œï¼š1.é‡‘æ¯    2.æ¯”äºšè¿ª");
            brand = input.nextInt() == 1 ? "é‡‘æ¯" : "æ¯”äºšè¿ª";
            System.out.println("è¯·é€‰æ‹©æ±½è½¦åº§ä½æ•°ï¼š1.  16åº§  2.  34åº§");
            seatCount = input.nextInt() == 1 ? 16 : 34;
        }

        // è·å–åˆ°äº†ç”¨æˆ·é€‰æ‹©çš„æ±½è½¦ä¿¡æ¯
        System.out.println("å“ç‰Œ:" + brand);
        System.out.println("å‹å·:" + type);
        System.out.println("åº§ä½æ•°:" + seatCount);

        // åˆ›å»ºæ±½è½¦æ“ä½œç±»å¯¹è±¡
        VehicleOperation vehicleOperation = new VehicleOperation();
        // é€šè¿‡é€‰æ‹©çš„å“ç‰Œ ç±»å‹ åº§ä½æ•° è·å–æœºåŠ¨è½¦å¯¹è±¡
        Vehicle vehicle = vehicleOperation.getVehicle(brand,type,seatCount);
        //
        System.out.println("è¯·è¾“å…¥ç§Ÿèµå¤©æ•°ï¼š");
        int days = input.nextInt();
        // è®¡ç®—ä»·æ ¼
        double price = vehicle.getPrice(days);
        // æ‰“å°ç§Ÿè½¦ç»“æœ
        System.out.println("åˆ†é…è·Ÿæ‚¨çš„è½¦ç‰Œå·ä¸ºï¼š" + vehicle.getVehicleId());
        System.out.println("æ‚¨åº”è¯¥æ”¯ä»˜çš„ç§Ÿé‡‘ä¸ºï¼š" + price);
    }
}

```

## ç»†èŠ‚é—®é¢˜

**æ‰“å°å †æ ˆä¿¡æ¯å’ŒæŠ›å‡ºæ–°çš„å¼‚å¸¸åŒºåˆ«**

```java
try{
    m4(189);
}catch (Exception e){
    // æ–¹å¼1ï¼šæŠ›å‡ºæ–°çš„ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸
    throw new RuntimeException(e); // åˆæŠ›å‡ºä¸€ä¸ªæ–°çš„å¼‚å¸¸ï¼Œä½†æ˜¯åç»­å†æ²¡æœ‰æ•è·åˆ°ï¼Œä¼šä¸­æ–­ç¨‹åºã€‚
    // æ–¹å¼2ï¼šæ‰“å°å †æ ˆä¿¡æ¯
    e.printStackTrace(); // æ‰“å°å¼‚å¸¸ï¼Œä½†æ˜¯ä¸ä¼šä¸­æ–­ç¨‹åºï¼Œåç»­ä»£ç ç»§ç»­æ‰§è¡Œã€‚
}
System.out.println("ç¨‹åºç»“æŸ") // åªè¦æ•è·åˆ°å¼‚å¸¸ï¼Œåç»­çš„ä»£ç å°±å¯ä»¥æ‰§è¡Œ
    
```

## ç»Ÿä¸€å¼‚å¸¸å¤„ç†

ç›®çš„æ˜¯ï¼šåœ¨é€šç”¨ä»£ç ä¸­ï¼ŒæŠŠç¼–è¯‘å‹çš„å¼‚å¸¸ï¼Œè½¬æ¢ä½è¿è¡Œæ—¶å¼‚å¸¸ï¼ŒssmåŒ…ä¸­ä¸å†æœ‰try catchï¼Œä¸ç”¨æ‹…å¿ƒå¼‚å¸¸å¤„ç†äº†ã€‚

**ğŸ”¥æ½œåœ¨é—®é¢˜**ï¼šå†…éƒ¨ç»„ä»¶trycatchåˆ°çš„é—®é¢˜ï¼Œæ‰“å°å‡ºæ¥äº†ï¼Œä½†åœ¨å¤–éƒ¨çš„ç»„ä»¶å°±catchä¸åˆ°äº†ï¼›

**ğŸ›è§£å†³åŠæ³•**ï¼šç»Ÿä¸€å¯¹å¼‚å¸¸åšå¤„ç†ï¼›å†…éƒ¨çš„ç»„ä»¶å‡ºç°é—®é¢˜ä¹‹åï¼Œå¾€å¤–æŠ›å¼‚å¸¸ï¼Œè®©å¤–éƒ¨ç»„ä»¶å¯ä»¥æ•æ‰åˆ°ï¼›

1ã€å°è£…ä¸€ä¸ªè¿è¡Œæ—¶å¼‚å¸¸ç±»ã€‚BaseDaoRunTimeException ç±»ï¼Œç»§æ‰¿ RuntimeException ç±»ã€‚

```java
package com.fruit.yuluo.myssm.exception;

/*
* å°è£…ä¸€ä¸ªå¼‚å¸¸
* */
public class BaseDaoRunTimeException extends RuntimeException{
    public BaseDaoRunTimeException(String msg){
        super(msg);
    }
}

```

2ã€JDBCä¸­å¤§éƒ¨åˆ†çš„å¼‚å¸¸éƒ½æ˜¯ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œåˆ†åˆ«åœ¨ BaseDaoä¸­æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒDispatcherServletæŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒConUtilç±»ä¸­æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼ŒTransActionManegerç±»ä¸­æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼›

```ts
åœ¨ BaseDao ç±»ã€ConnUtilç±»ã€DispatcherServletç±»ã€TransactionManagerç±»ã€OpenSessionViewFilterä¸­ï¼Œcatchåˆ°å¼‚å¸¸åï¼ŒæŠ›å‡ºå¼‚å¸¸ã€‚

catch (Exception e) {
    e.printStackTrace();
    throw new RuntimeException("æœªæ‰¾åˆ°"+oper+"æ–¹æ³•");
}

// æ–¹å¼1ï¼šå‘å¤–æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸
throw new BaseDaoRunTimeException(e.getMessage)
// æ–¹å¼2ï¼šå‘å¤–æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸
throw new RuntimeException("xxxxxx")
throw new BaseDaoRunTimeException(e.getMessage());
// æ‰“å° å¼‚å¸¸å †æ ˆä¿¡æ¯
e.printStackTrace();
// æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸
throw new RuntimeException("æœªæ‰¾åˆ°"+oper+"æ–¹æ³•");
```

