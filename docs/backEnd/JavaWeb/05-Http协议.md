# HTTP协议

HTTP协议由请求和响应两部分构成，请求是由客户端往服务器传输数据，响应是由服务器往客户端传输数据。

## URL

**URL 就是互联网上资源的地址**。

它告诉浏览器：

- **用什么协议**访问
- **在哪台主机**
- **哪个端口**
- **哪个路径**
- **附带哪些参数**

比如：

```ts
https://www.example.com:8080/fruit/detail?id=1&name=apple#section2

```

URL 的组成部分

```ts
协议://主机:端口/路径?查询字符串#片段
```

1. **协议（Scheme）**
   - 决定了访问方式。
   - 常见的有：
     - `http://` → 普通网页传输
     - `https://` → 安全加密网页传输
     - `ftp://` → 文件传输
     - `mailto:` → 邮件链接
2. **主机（Host）**
   - 域名（`www.example.com`）或 IP 地址（`192.168.1.1`）。
3. **端口（Port）**
   - 服务运行的端口，HTTP 默认 `80`，HTTPS 默认 `443`。
   - 如果是默认端口，可以省略。
4. **路径（Path）**
   - 指定服务器上的资源位置，比如 `/fruit/detail`。
5. **查询字符串（Query String）**
   - `?` 开始，键值对形式，用 `&` 分隔。
   - 示例：`?id=1&name=apple`
6. **片段标识符（Fragment / Anchor）**
   - `#` 开始，用来定位页面内部的锚点，不会发给服务器。
   - 示例：`#section2`

例子

```ts
https://shop.example.com:443/products/list?page=2&category=fruit#reviews
```

- 协议：`https`
- 主机：`shop.example.com`
- 端口：`443`（HTTPS 默认端口）
- 路径：`/products/list`
- 查询字符串：`page=2&category=fruit`
- 片段：`#reviews`（页面内评论区域）

**URL 和 URI 的区别**

- **URI**（统一资源标识符，Uniform Resource Identifier）：用来唯一标识资源，可以是名字或位置。
- **URL**（统一资源定位符）：是 URI 的一种，专门描述资源的**位置**。

## 查询字符串

**位置**：跟在 **URL** 的 `?` 后面，多个参数用 `&` 连接。

**作用**：向服务器传递 **键值对形式的数据**。

**特点**：一般用于 **GET 请求**，数据会显示在 URL 上。

示例：

```ts
GET /search?keyword=apple&page=2 HTTP/1.1
```

对应的查询字符串是：

```ts
keyword=apple&page=2
```



## 请求报文

请求报文的三个部分

![image-20250917162548302](https://2216847528.oss-cn-beijing.aliyuncs.com/asset/image-20250917162548302.png)

**请求行**

作用: 展示当前请求的最基本信息

- 请求方式
- 访问地址
- HTTP协议的版本

**请求消息头**

作用: 通过具体的参数对本次请求进行详细的说明

格式: 键值对，键和值之间使用冒号隔开

相对比较重要的请求消息头：

| 名称           | 功能                                                 |
| -------------- | ---------------------------------------------------- |
| Host           | 服务器的主机地址                                     |
| Accept         | 声明当前请求能够接受的『媒体类型』                   |
| Referer        | 当前请求来源页面的地址                               |
| Content-Length | 请求体内容的长度                                     |
| Content-Type   | 请求体的内容类型，这一项的具体值是媒体类型中的某一种 |
| Cookie         | 浏览器访问服务器时携带的Cookie数据                   |

**请求体**

作用：作为请求的主体，发送数据给服务器。具体来说其实就是POST请求方式下的请求参数。

格式：

**1. form data**

含义：当前请求体是一个表单提交的请求参数。

查看源码后，发现格式如下：

> username=tom&password=123456

- 每一组请求参数是一个键值对
- 键和值中间是等号
- 键值对之间是&号

**2.Request Payload**

含义：整个请求体以某种特定格式来组织数据，例如JSON格式。

![image-20250917162726518](https://2216847528.oss-cn-beijing.aliyuncs.com/asset/image-20250917162726518.png)

## 请求方式

八种方式

- GET：从服务器端获取数据
- POST：将数据保存到服务器端
- PUT：命令服务器对数据执行更新
- DELETE：命令服务器删除数据
- HEAD
- CONNECT
- OPTIONS
- TRACE

**GET请求**

- 特征1：没有请求体
- 特征2：请求参数附着在URL地址后面
- 特征3：请求参数在浏览器地址栏能够直接被看到，存在安全隐患
- 特征4：在URL地址后面携带请求参数，数据容量非常有限。如果数据量大，那么超出容量的数据会丢失
- 特征5：从报文角度分析，请求参数是在请求行中携带的，因为访问地址在请求行

**POST请求**

- 特征1：有请求体
- 特征2：请求参数放在请求体中
- 特征3：请求体发送数据的大小没有限制
- 特征4：可以发送各种不同类型的数据
- 特征5：从报文角度分析，请求参数是在请求体中携带的
- 特征6：由于请求参数是放在请求体中，所以浏览器地址栏看不到

## 媒体类型

Multipurpose Internet Mail Extensions：HTTP协议中的MIME类型

作用：为了让用户通过浏览器和服务器端交互的过程中有更好、更丰富的体验，HTTP协议需要支持丰富的数据类型。

MIME类型定义参考：

## 响应报文

![image-20250917163002317](https://2216847528.oss-cn-beijing.aliyuncs.com/asset/image-20250917163002317.png)

**响应状态行**

> HTTP/1.1 200 OK

- HTTP协议版本
- 响应状态码
- 响应状态的说明文字

**响应消息头**

- 响应体的说明书。
- 服务器端对浏览器端设置数据，例如：服务器端返回Cookie信息。

| 名称           | 功能                                             |
| -------------- | ------------------------------------------------ |
| Content-Type   | 响应体的内容类型                                 |
| Content-Length | 响应体的内容长度                                 |
| Set-Cookie     | 服务器返回新的Cookie信息给浏览器                 |
| location       | 在重定向的情况下，告诉浏览器访问下一个资源的地址 |

**响应体**

服务器返回的数据主体，有可能是各种数据类型。

- HTML页面
- 图片
- 视频
- 以下载形式返回的文件
- CSS文件
- JavaScript文件

**响应状态码**

作用：以编码的形式告诉浏览器当前请求处理的结果

| 状态码 | 含义                                                      |
| ------ | --------------------------------------------------------- |
| 200    | 服务器成功处理了当前请求，成功返回响应                    |
| 302    | 重定向                                                    |
| 400    | [SpringMVC特定环境]请求参数问题                           |
| 403    | 没有权限                                                  |
| 404    | 找不到目标资源                                            |
| 405    | 请求方式和服务器端对应的处理方式不一致                    |
| 406    | [SpringMVC特定环境]请求扩展名和实际返回的响应体类型不一致 |
| 50X    | 服务器端内部错误，通常都是服务器端抛异常了                |

404产生的具体原因：

- 访问地址写错了，确实是没有这个资源
- 访问了WEB-INF目录下的资源
- Web应用启动的时候，控制台已经抛出异常，导致整个Web应用不可用，访问任何资源都是404
- 服务器端缓存